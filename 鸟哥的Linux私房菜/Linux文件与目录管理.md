# Linux 的文件权限
## 使用者与群组
所有的系统上的账号与一般身份使用者，还有那个 root 的相关信息， 都是记录在_etc_passwd 这个文件内的。 至于个人的密码则是记录在_etc_shadow 这个文件下。 此外，Linux 所有的组名都纪录在_etc_group 内。

## 文件权限概念
属性及分组的意义是数据的安全性。
- 比如住哪个号管理目录为 /etc/shadow，此时权限为 -------- 所有人都不能使用，但root不受系统的权限所限制。
- 开发团队共享数据

使用 su 来切换身份，exit离开su。

关于第一个字符的含义

|字符    | 含义   |
| ------------- |:-------------:|
|d  		|目录				|
|-   		|文件				|
|l		|连接档				|
|b 		|接口设备			|
|c    		|串行端口（键鼠）	|

Rwx的含义，但是不同组的权限也不同。

|位置    | 含义   |
| ------------- |:-------------:|
|第一组	|文件拥有者的权限		|
|第二组	|加入此群组账号的权限	|
|第三组	|非本人且未加群			|

查看文件的属性
```
la -al
```
|位置    | 含义   |
| ------------- |:-------------:|
|第一栏	|文件的类型与权限		    |
|第二栏	|多少档名连接到此节点  |
|第三栏	|拥有者账号			|
|第四栏	|所属群组			|
|第五栏	|容量大小			|
|第六栏	|日期			   |
|第七栏	|文件的档名	.为隐藏档	   |

## 如何改变文件的属性与权限
- chgrp：群组
- chown：拥有者
- chmod：文件的权限

如果拷贝一个文件，但是拥有者还是root得话，另一个人还是没法用的。
### chgrp
> 注意：改变的组名必须在/etc/group 文件内有存在才可以被使用

```
chgrp [-R] dirname/filename ...
```
-R是指进行递归的持续变更

### chown
甚至可以一起修改组群的名称
```
chown root：root initial-setup-ks.cfg
```

### chmod
更改权限，用的是数字代表权限。

|权限    | 数值   |含义|
| ------------- |:-------------:| ------------- |
|r	 |4  |可读，ls的时候会显示
|w	 |2  |可编辑，新增或者修改（但不能删除）
|x	 |1  |执行

u = user

go = group+other

a = all

```
chmod 777 .bashrc

chomd u=rwx,go=rx .bashrc

//全部人增加w权限
chmod a+w .bashrc
```

## 目录与文件之权限意义
Windows下面文件是否可以执行是用扩展名判断的，但Linux底下是用x这个权限来决定的。

即使你有r或者w的权利，但如果你没有x的权限，就不能进入这个目录。
例如网站，给别人r的权限，用户只能看到文件名但无法查阅。开放目录的时候至少要给r与x的权利，但是w不能给。


## 文件种类与扩展名

### 常规文件
|文件种类    | 含义   |
| ------------- |:-------------:|
|纯文本ASCII    |最多的一种文件类型，cat可以读出来   |
|二进制binary    |系统其实只认识二进制文件   |
|数据格式文件data    |登录数据在/var/log/wtmp文件中|

### 目录 directory
属性 d

### 连结档 link
类似快捷方式 第一个属性为 l，类似Windows下的快捷方式。

### 设备与装置文件
|文件种类    | 含义   |
| ------------- |:-------------:|
|区块（block）设备档 |存储数据，提供接口设备 属性b|
|字符（character）设备文件    |串行端口的接口设备，不能够截断输入 c  |

### 资料接口文件
sockets 属性s，与网络相关。

### 数据输送文件 FIFO ，pipe
主要用于解决多个程序同时存取一个文件所造成的错误问题。属性p。与process有关。

适当的扩展名可以了解这个文件的信息。

|名称    | 含义   |
| ------------- |:-------------:|
|.sh    |脚本或者批处理文件，shell写的|
|.Z .tar .tgz .tar.gz .zip    |压缩文件   |
|.php .html    |网页相关|


# 目录配置
## 目录配置的依据FHS
定义了四种类型：
- 可分享的：分享给其他系统挂载使用的目录，包括执行文件等
- 不可分享的：机器运作有关的装置文件，或者socket文件等
- 不变的：static，函式库、说明文件、配置文件等
- 可变动的：variable，登录文件等

FHS定义了三层目录：
- /(root,根目录)：与开机系统有关
- /usr：与软件安装、执行有关
- /var：与系统运作过程有关

所有的目录都是由根目录衍生出来的，同时根目录也与开机/还原/系统修复等动作有关。由于系统开机时需要特定的开机软件、核心文件、开机所需程序、函式库等等文件数据，若系统出现错误时，根目录也必须要包含有能够修复文件系统的程序才行。因为根目录是这么的重要，所以在 FHS的要求方面，他希望根目录不要放在非常大的分区槽内，因为越大的分区槽妳会放入越多的数据，如此一来
*根目录所在分区槽就可能会有较多发生错误的机会*。

**因此 FHS 标准建议：根目录(/)所在分区槽应该越小越好，且应用程序所安装的软件最好不要与根目录放在同一个分区槽内，保持根目录越小越好。如此不但效能较佳，根目录所在的文件系统也较不容易发生问题。**

五个与根目录一起的重要目录：

|目录    | 含义   |
| ------------- |:-------------:|
|/etc    | 重要的配置文件，账户、初始档，供别人查阅，但不能修改|
|/bin    | 在单人维护模式下还能够被操作的指令   |
|/dev    | 装置与接口以文件型态存于此目录   |
|/lib    | 开机时会用到的函式库   |
|/sbin   | 开机过程所需要的，开机、修复、还原系统所需要的指令   |

### usr
usr：Unix Software Resource 操作系统软件资源

有点类似于 C:\Program files\ 这个目录

即使挂载成为只读，系统还是可以正常运行的。

/usr 里面放置的数据属于可分享的与不可变动的。

usr的次级目录：

|目录    | 含义   |
| ------------- |:-------------:|
|/bin    | 一般用户能够使用的指令|
|/lib    | 基本与上面lib相同   |
|/local    | 系统管理员自行安装的软件   |
|/sbin    | 基本与上面sbin相同   |
|/share   | 只读架构的数据文件  |


### var
var系统运作后才会渐渐占用硬盘容量的目录，快取、登录档以及某些运行文件。

## 目录树 directory tree
- 目录树的启始点为根目录 (/, root)
- 每一个目录不止能使用本地端的partition的文件系统，也可以使用网络上的 filesystem。举例来说，可以利用Network File System (NFS)服务器挂载某特定目录等
- 每一个文件在此目录树中的文件名(包含完整路径)都是独一无二的

### 绝对路径与相对路径
```
当前目录： ./
上一层： ../
```

### CentOS观察
除了FHS标准，还有一个LSB标准。
